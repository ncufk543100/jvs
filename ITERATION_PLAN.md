# 贾维斯迭代计划 - 对标Manus

**制定时间**: 2026-01-29  
**制定者**: Manus (导师)  
**目标**: 在3个迭代周期内，将贾维斯能力从59分提升到90分以上

---

## 迭代策略

### 第一阶段：基础能力补全（P0优先级）
**目标**: 补全最关键的缺失能力，达到75分  
**周期**: 当前 - 完成3个P0任务

### 第二阶段：功能增强（P1优先级）
**目标**: 增强核心功能，达到85分  
**周期**: 完成4个P1任务

### 第三阶段：体验优化（P2优先级）
**目标**: 优化用户体验，达到90分以上  
**周期**: 完成剩余P2任务

---

## 第一阶段：基础能力补全

### 任务1：实现浏览器交互能力 🔴 P0
**当前状态**: 只有browse_url（访问URL+提取文本）  
**目标状态**: 完整的浏览器自动化能力

**具体任务**:
1. 安装playwright或selenium
2. 实现browser_navigate工具（导航）
3. 实现browser_click工具（点击元素）
4. 实现browser_input工具（输入文本）
5. 实现browser_scroll工具（滚动页面）
6. 实现browser_screenshot工具（截图）
7. 实现browser_execute_js工具（执行JavaScript）
8. 实现browser_save_image工具（保存图片）
9. 实现browser_upload_file工具（上传文件）
10. 实现browser_fill_form工具（填写表单）

**实现方式**:
- 在沙盒中创建`browser_tools.py`模块
- 使用playwright库
- 在executor.py中注册所有浏览器工具
- 测试每个工具的功能

**验收标准**:
- 能够自动化操作微信开发者工具
- 能够截图并分析页面错误
- 能够填写表单并提交

**预计时间**: 1个迭代周期

---

### 任务2：实现多任务管理系统 🔴 P0
**当前状态**: 只能串行执行单个任务  
**目标状态**: 支持多任务并行、切换、管理

**具体任务**:
1. 设计任务数据结构（Task类）
2. 实现任务管理器（TaskManager）
3. 修改server.py支持多任务
4. 实现UI左侧边栏
5. 实现任务列表显示
6. 实现任务切换功能
7. 实现任务创建/删除
8. 实现任务状态持久化
9. 实现任务历史查询

**实现方式**:
- 创建`task_manager.py`模块
- 修改`server.py`的/run接口
- 修改`ui.html`添加左侧边栏
- 使用SQLite存储任务历史

**验收标准**:
- 能够同时创建多个任务
- 能够在任务之间切换
- 能够查看历史任务
- UI类似Cursor的项目管理界面

**预计时间**: 1个迭代周期

---

### 任务3：实现并行处理能力 🔴 P0
**当前状态**: 只能串行执行  
**目标状态**: 支持map工具，最多2000个子任务

**具体任务**:
1. 实现map工具函数
2. 设计子任务沙盒隔离机制
3. 实现并行执行调度器
4. 实现结果聚合
5. 实现错误处理和重试
6. 实现进度显示

**实现方式**:
- 创建`parallel_processor.py`模块
- 使用multiprocessing或asyncio
- 在executor.py中注册map工具

**验收标准**:
- 能够并行处理100个子任务
- 子任务之间互不干扰
- 能够聚合所有结果

**预计时间**: 0.5个迭代周期

---

## 第二阶段：功能增强

### 任务4：实现文件编辑工具 🟡 P1
**当前状态**: 只能全量写入文件  
**目标状态**: 支持精确定位修改

**具体任务**:
1. 实现edit_file工具
2. 支持find-replace模式
3. 支持行号定位模式
4. 支持正则表达式替换
5. 支持多处修改（批量编辑）

**实现方式**:
- 在executor.py中添加edit_file函数
- 参考Manus的file工具edit action

**验收标准**:
- 能够精确修改代码中的某一行
- 能够批量替换多个位置
- 不会破坏文件格式

**预计时间**: 0.3个迭代周期

---

### 任务5：增强搜索功能 🟡 P1
**当前状态**: 只有DuckDuckGo基础搜索  
**目标状态**: 支持7种搜索类型

**具体任务**:
1. 实现search工具（替代web_search）
2. 支持多种搜索类型（info/image/api/news等）
3. 支持多查询变体
4. 支持时间过滤
5. 实现图片自动下载

**实现方式**:
- 创建`search_engine.py`模块
- 集成多个搜索API（Google/Bing/GitHub等）
- 在executor.py中注册search工具

**验收标准**:
- 能够搜索不同类型的信息
- 能够下载搜索到的图片
- 搜索结果质量高

**预计时间**: 0.5个迭代周期

---

### 任务6：实现多模态应用 🟡 P1
**当前状态**: server.py支持图片输入，但无应用  
**目标状态**: 能够理解和处理图片、PDF等

**具体任务**:
1. 实现analyze_image工具
2. 实现analyze_screenshot工具
3. 实现read_pdf工具
4. 集成OCR功能
5. 在UI中显示图片分析结果

**实现方式**:
- 在executor.py中添加多模态工具
- 使用gpt-4o的视觉能力
- 使用PyPDF2处理PDF

**验收标准**:
- 能够理解用户发送的截图
- 能够提取PDF中的文本
- 能够识别图片中的错误

**预计时间**: 0.4个迭代周期

---

### 任务7：UI现代化改造 🟡 P1
**当前状态**: 基础HTML界面  
**目标状态**: 现代化、美观、易用

**具体任务**:
1. 添加Markdown渲染（使用marked.js）
2. 添加代码高亮（使用highlight.js）
3. 实现文件上传/下载
4. 实现图片预览
5. 实现代码复制按钮
6. 优化响应式设计
7. 添加暗黑模式

**实现方式**:
- 修改ui.html
- 引入前端库（marked.js、highlight.js）
- 使用现代CSS框架（Tailwind CSS）

**验收标准**:
- UI美观现代
- Markdown正确渲染
- 代码高亮清晰
- 支持文件上传

**预计时间**: 0.5个迭代周期

---

## 第三阶段：体验优化

### 任务8：实现定时任务 🟢 P2
**具体任务**:
1. 实现schedule工具
2. 支持cron表达式
3. 支持interval模式
4. 实现任务持久化

**预计时间**: 0.3个迭代周期

---

### 任务9：实现Web开发工具 🟢 P2
**具体任务**:
1. 实现webdev_init_project工具
2. 支持多种项目模板
3. 自动配置开发环境

**预计时间**: 0.4个迭代周期

---

### 任务10：实现幻灯片生成 🟢 P2
**具体任务**:
1. 实现slides工具
2. 支持Markdown转PPT
3. 支持主题定制

**预计时间**: 0.3个迭代周期

---

## 执行计划

### 第一周：P0任务
- Day 1-2: 任务1 - 浏览器交互能力
- Day 3-4: 任务2 - 多任务管理系统
- Day 5: 任务3 - 并行处理能力

### 第二周：P1任务
- Day 1: 任务4 - 文件编辑工具
- Day 2-3: 任务5 - 增强搜索功能
- Day 4: 任务6 - 多模态应用
- Day 5: 任务7 - UI现代化改造

### 第三周：P2任务
- Day 1: 任务8 - 定时任务
- Day 2: 任务9 - Web开发工具
- Day 3: 任务10 - 幻灯片生成
- Day 4-5: 整体测试和优化

---

## 成功标准

### 第一阶段完成标准（75分）
- ✅ 能够自动化操作浏览器
- ✅ 支持多任务管理
- ✅ 支持并行处理

### 第二阶段完成标准（85分）
- ✅ 能够精确编辑文件
- ✅ 搜索功能强大
- ✅ 能够理解图片和PDF
- ✅ UI现代化美观

### 第三阶段完成标准（90分+）
- ✅ 支持定时任务
- ✅ 支持Web开发
- ✅ 支持幻灯片生成
- ✅ 整体体验接近Manus

---

## 下一步行动

**立即开始**: 任务1 - 实现浏览器交互能力

**执行方式**:
1. 贾维斯在沙盒中创建`browser_tools.py`
2. 安装playwright
3. 实现10个浏览器工具
4. 测试功能
5. 提交给导师审查
6. 导师审查通过后，应用到正式代码

**开始命令**: "贾维斯，请开始执行任务1：实现浏览器交互能力。参考ITERATION_PLAN.md中的详细步骤。"

---

**版本**: 1.0  
**作者**: Manus (导师)  
**状态**: 待执行
